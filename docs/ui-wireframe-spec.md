# Parchment E-Reader UI Wireframe 规格

## 设计约束

| 参数 | 值 |
|------|------|
| 屏幕分辨率 | 540×960 (竖屏模式, 旋转后) |
| 像素密度 | 235 PPI |
| 色彩 | 16 级灰度 (0x00=黑 ~ 0xF0=白) |
| 触摸 | 电容触摸, 两点触控, GT911 |
| 刷新延迟 | 全刷 ~1s, 局部刷 ~0.3s |

## 设计原则

1. **高对比度** - E-Ink 灰度有限, 文字用纯黑(0x00)背景纯白(0xF0), 次要元素用中灰(0x80)
2. **最少刷新** - 避免动画, 减少全屏刷新次数, 翻页用局部刷新
3. **大触摸区域** - 最小触摸目标 48×48px (约 5mm), 翻页区域要尽可能大
4. **信息密度适中** - 利用 235PPI 高清晰度, 但不要塞满内容
5. **一致的导航模式** - 返回操作统一在左上角, 确认操作统一在右侧

## 灰度色板

```
BLACK   = 0x00  // 正文文字, 图标
DARK    = 0x30  // 次要文字, 边框
MEDIUM  = 0x80  // 禁用状态, 分隔线
LIGHT   = 0xC0  // 背景区分, 选中态底色
WHITE   = 0xF0  // 页面背景
```

---

## 1. 启动画面 (Boot Screen)

```
┌─────────────────────────────┐
│                             │  540px
│                             │
│                             │
│                             │
│         ┌─────────┐         │
│         │  LOGO   │         │  居中, 120×120px
│         └─────────┘         │
│                             │
│         Parchment           │  字体 36px, BLACK, 居中
│                             │
│       E-Ink Reader          │  字体 18px, DARK, 居中
│                             │
│                             │
│      Initializing...        │  字体 14px, MEDIUM, 居中
│                             │
│                             │
│                             │
└─────────────────────────────┘
                               960px
```

**行为:**
- 显示 2-3 秒后自动跳转到 Library
- 初始化失败时显示错误信息替换 "Initializing..."

---

## 2. 书库界面 (Library Screen)

```
┌─────────────────────────────┐
│ ≡  Parchment          ⚙    │  Header: 48px高, BLACK底WHITE字
├─────────────────────────────┤
│ 📖 12 本书  |  按名称排序 ▼  │  Subheader: 36px高, LIGHT底
├─────────────────────────────┤
│                             │
│ ┌─────┐                    │
│ │ TXT │ 三体                │  书名: 20px, BLACK
│ │     │ 刘慈欣              │  作者: 16px, DARK
│ └─────┘ ████████░░ 80%     │  进度条: 120×8px
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│  分隔线: MEDIUM, 1px
│ ┌─────┐                    │
│ │EPUB │ Pride & Prejudice   │
│ │     │ Jane Austen         │
│ └─────┘ ██░░░░░░░░ 20%     │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│ ┌─────┐                    │
│ │EPUB │ 百年孤独             │
│ │     │ 加西亚·马尔克斯      │
│ └─────┘ ░░░░░░░░░░ 0%      │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│ ┌─────┐                    │
│ │ TXT │ README.txt          │
│ │     │ Unknown             │
│ └─────┘ ██████░░░░ 60%     │
│                             │
│         (scroll)            │
└─────────────────────────────┘
```

**布局详情:**

| 元素 | 位置 | 尺寸 | 说明 |
|------|------|------|------|
| Header | (0, 0) | 540×48 | 黑底白字, 左侧菜单图标, 右侧设置图标 |
| Subheader | (0, 48) | 540×36 | LIGHT 底色, 显示书数量和排序方式 |
| Book Item | (0, 84+n*96) | 540×96 | 每个书目项 96px 高 |
| 封面缩略图 | (16, item_y+8) | 60×80 | 格式标签 (TXT/EPUB), LIGHT 底 BLACK 边框 |
| 书名 | (92, item_y+12) | 432×24 | 20px, BLACK, 单行截断 |
| 作者 | (92, item_y+40) | 432×20 | 16px, DARK, 单行截断 |
| 进度条 | (92, item_y+66) | 200×8 | 已读=BLACK, 未读=LIGHT, 右侧显示百分比 |
| 分隔线 | (16, item_y+95) | 508×1 | MEDIUM 颜色 |

**交互:**
- 点击书目项 → 打开阅读界面
- 点击 ⚙ → 进入全局设置
- 点击排序 ▼ → 切换排序方式 (名称/日期/进度)
- 上下滑动 → 滚动书目列表 (局部刷新)

**可见书目数:** (960 - 48 - 36) / 96 ≈ **9 本书**可见

---

## 3. 阅读界面 (Reading View)

```
┌─────────────────────────────┐
│  第三章 黑暗森林             │  章节标题: 14px, DARK, 顶部 padding 12px
├ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┤
│                             │
│  正文内容区域                │
│                             │
│  这里显示渲染后的文字内容。    │  正文: 用户自定义字体/大小
│  支持 ePub 的段落、标题、     │  默认: 20px, BLACK
│  加粗、斜体等基本格式。       │  行高: 1.6倍
│                             │  左右边距: 24px
│  对于 TXT 文件,按照纯文本    │  上下内容区: 40px ~ 910px
│  方式渲染,自动换行和分页。    │
│                             │
│  段落之间保持适当的间距,      │
│  确保阅读舒适。              │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
├ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┤
│  三体 · 刘慈欣    42/380  11%│  页脚: 14px, DARK, 底部 padding 8px
└─────────────────────────────┘
```

**布局详情:**

| 元素 | 位置 | 尺寸 | 说明 |
|------|------|------|------|
| 章节标题 | (24, 8) | 492×28 | 14px, DARK, 左对齐 |
| 内容区域 | (margin, 40) | (540-2*margin)×870 | 自定义字体和大小 |
| 页脚 | (24, 932) | 492×20 | 14px, DARK, 书名·作者 左侧, 页码/总页 百分比 右侧 |

**触摸区域划分:**

```
┌──────────┬──────────┬──────────┐
│          │          │          │
│          │          │          │
│  上一页   │  工具栏   │  下一页   │
│          │          │          │
│  (左1/3)  │ (中1/3)  │ (右1/3)  │
│          │          │          │
│          │          │          │
│  180px宽  │  180px宽  │  180px宽  │
│          │          │          │
└──────────┴──────────┴──────────┘
```

- 点击左侧 1/3 区域 → 上一页 (局部刷新)
- 点击右侧 1/3 区域 → 下一页 (局部刷新)
- 点击中间 1/3 区域 → 显示/隐藏工具栏
- 每隔 N 页执行一次全刷以消除残影 (可配置, 默认每 5 页)

---

## 4. 阅读工具栏 (Reading Toolbar)

```
┌─────────────────────────────┐
│ ←  三体               🔖  │  Top bar: 48px, BLACK底WHITE字
├─────────────────────────────┤
│                             │
│                             │
│     (阅读内容变暗显示)       │  内容区域覆盖半透明灰色遮罩
│                             │  (用 MEDIUM 灰度模拟)
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
├─────────────────────────────┤
│  ████████████░░░░░░░░  42%  │  进度条: 480×12px, 可拖拽
├─────────────────────────────┤
│                             │
│   📑 目录    Aa 设置    🔖 书签 │  底部按钮: 3 个, 等分, 64px高
│                             │
└─────────────────────────────┘
```

**布局详情:**

| 元素 | 位置 | 尺寸 | 说明 |
|------|------|------|------|
| Top bar | (0, 0) | 540×48 | BLACK 底, ← 返回 (左), 书名 (中), 书签 (右) |
| 遮罩层 | (0, 48) | 540×780 | LIGHT 灰色覆盖阅读内容 |
| 进度条 | (30, 828) | 480×36 | 可触摸滑动跳页, BLACK 已读/LIGHT 未读 |
| 百分比 | (410, 834) | 100×24 | 14px, DARK |
| 底部按钮 | (0, 876) | 540×84 | 3 个按钮等分, 图标+文字, 48px触摸区 |

**交互:**
- ← → 返回书库
- 进度条拖拽 → 跳到对应页 (释放后刷新)
- 📑 目录 → 进入目录界面
- Aa 设置 → 进入阅读设置
- 🔖 书签 → 添加/移除当前页书签
- 点击遮罩区域 → 关闭工具栏

---

## 5. 阅读设置 (Reading Settings)

```
┌─────────────────────────────┐
│ ←  阅读设置                 │  Header: 48px, BLACK底WHITE字
├─────────────────────────────┤
│                             │
│  字体                       │  Label: 16px, DARK
│  ┌─────────────────────────┐│
│  │ 思源宋体          ▶     ││  Selector: 540×48, 点击展开
│  └─────────────────────────┘│
│                             │
│  字号                       │
│  ┌──┐                ┌──┐  │
│  │A-│  ████ 20px ████ │A+│  │  -/+ 按钮: 48×48, 中间显示当前值
│  └──┘                └──┘  │
│                             │
│  行距                       │
│  1.0 ──●────────────── 2.5  │  Slider: 当前值 1.6
│                             │
│  段间距                      │
│  0   ──────●──────── 24px   │  Slider: 当前值 8px
│                             │
│  页边距                      │
│  ┌────┐ ┌────┐ ┌────┐      │
│  │窄  │ │中  │ │宽  │      │  3选1按钮: 各120×48
│  │16px│ │24px│ │36px│      │  选中态: BLACK底WHITE字
│  └────┘ └────┘ └────┘      │  未选中: LIGHT底BLACK字
│                             │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  预览                       │
│ ┌───────────────────────── ┐│
│ │ 这是一段预览文字。用于     ││  预览框: 492×200
│ │ 展示当前字体、字号和行距   ││  实时反映设置变化
│ │ 的效果。The quick brown    ││
│ │ fox jumps over the lazy   ││
│ │ dog. 1234567890           ││
│ └───────────────────────── ┘│
│                             │
│  ┌─────────────────────────┐│
│  │        应用设置          ││  确认按钮: 492×48, BLACK底WHITE字
│  └─────────────────────────┘│
└─────────────────────────────┘
```

**布局详情:**

| 元素 | 位置 | 尺寸 | 说明 |
|------|------|------|------|
| Header | (0, 0) | 540×48 | ← 返回 + 标题 |
| 字体选择器 | (24, 96) | 492×48 | 当前字体名 + ▶ 箭头, 点击弹出列表 |
| 字号控制 | (24, 192) | 492×48 | A- 按钮 + 当前值 + A+ 按钮 |
| 行距滑块 | (24, 288) | 492×36 | 范围 1.0~2.5, 步进 0.1 |
| 段间距滑块 | (24, 372) | 492×36 | 范围 0~24px, 步进 2 |
| 页边距选择 | (24, 456) | 492×48 | 三选一按钮组 |
| 预览区 | (24, 552) | 492×200 | LIGHT 边框, WHITE 底, 实时预览 |
| 应用按钮 | (24, 788) | 492×48 | BLACK 底 WHITE 字 |

**字号范围:** 14px ~ 32px, 步进 2px
**行距范围:** 1.0 ~ 2.5, 步进 0.1
**默认值:** 字号 20px, 行距 1.6, 段间距 8px, 页边距 24px

---

## 6. 目录界面 (Table of Contents)

```
┌─────────────────────────────┐
│ ←  目录                     │  Header: 48px
├─────────────────────────────┤
│                             │
│   第一部 疯狂年代            │  一级标题: 18px, BLACK, 粗体
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│     第一章 科学边界      p.1 │  二级标题: 16px, BLACK
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│     第二章 射手与农场主  p.15│
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  ●  第三章 黑暗森林     p.42│  当前章节: ● 标记, LIGHT底色高亮
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│     第四章 三体问题     p.68│
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│                             │
│   第二部 人类的黎明          │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│     第五章 面壁者       p.95│
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│     第六章 咒语       p.120 │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│     ...                     │
│                             │
└─────────────────────────────┘
```

**布局详情:**

| 元素 | 位置 | 尺寸 | 说明 |
|------|------|------|------|
| 一级标题 | (24, y) | 492×44 | 18px 粗体, BLACK, 上下 padding 12px |
| 二级标题 | (48, y) | 420×40 | 16px, BLACK, 缩进 24px |
| 页码 | (右对齐, y) | - | 16px, DARK, 右侧 24px padding |
| 当前章节 | 同上 | 同上 | LIGHT 底色, 左侧 ● 标记 |
| 分隔线 | (24, y+39) | 492×1 | MEDIUM |

**交互:**
- 点击任意章节 → 跳转到该章节开始并返回阅读界面
- 上下滑动 → 滚动目录列表
- ← → 返回阅读界面

---

## 7. 全局设置 (Global Settings)

```
┌─────────────────────────────┐
│ ←  设置                     │  Header: 48px
├─────────────────────────────┤
│                             │
│  阅读                       │  Section header: 16px, DARK
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  默认字体          思源宋体 ▶│  Item: 540×56, 左标签右值
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  默认字号               20px│
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  全刷间隔               5 页│
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│                             │
│  系统                       │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  休眠超时            30 秒  │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  屏幕旋转              自动 │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│                             │
│  关于                       │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  版本              v0.1.0   │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  硬件          M5PaperS3    │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│  存储         2.1GB / 8GB   │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│
│                             │
│                             │
└─────────────────────────────┘
```

**布局详情:**

| 元素 | 位置 | 尺寸 | 说明 |
|------|------|------|------|
| Section header | (24, y) | 492×32 | 16px, DARK, 上下 padding 8px |
| 设置项 | (0, y) | 540×56 | 左侧标签 18px BLACK, 右侧值 18px DARK |
| 分隔线 | (24, y+55) | 492×1 | MEDIUM |

**交互:**
- 点击有 ▶ 的项 → 进入子页面
- 点击数值项 → 弹出调节控件 (±按钮或滑块)
- ← → 返回书库

---

## 8. 字体选择器 (Font Selector - 弹出层)

```
┌─────────────────────────────┐
│                             │
│  ┌───────────────────────┐  │
│  │  选择字体              │  │  弹出框: 492×400, 居中
│  ├───────────────────────┤  │  WHITE底, BLACK边框2px
│  │                       │  │
│  │  ● 思源宋体            │  │  选中: ● 标记 + LIGHT底
│  │    AaBb 你好世界 123   │  │  字体预览: 14px, DARK
│  ├───────────────────────┤  │
│  │  ○ 思源黑体            │  │  未选中: ○ 空心
│  │    AaBb 你好世界 123   │  │
│  ├───────────────────────┤  │
│  │  ○ Noto Serif          │  │
│  │    AaBb Hello 123     │  │
│  ├───────────────────────┤  │
│  │  ○ Custom Font.ttf    │  │  用户自定义字体 (从SD卡加载)
│  │    AaBb 你好世界 123   │  │
│  ├───────────────────────┤  │
│  │       确定             │  │  确认按钮: BLACK底WHITE字
│  └───────────────────────┘  │
│                             │
└─────────────────────────────┘
```

**说明:**
- 内置字体 + SD 卡 `/sdcard/fonts/` 目录下的 .ttf/.otf 字体
- 每个字体显示名称 + 预览文字
- 选中后按确定返回设置界面

---

## 通用组件规格

### 按钮

| 类型 | 样式 | 尺寸 |
|------|------|------|
| 主按钮 | BLACK底 WHITE字 | 最小 120×48 |
| 次按钮 | WHITE底 BLACK字 BLACK边框 | 最小 120×48 |
| 图标按钮 | 透明底 BLACK图标 | 48×48 触摸区 |
| 选中态 | LIGHT底 BLACK字 | - |

### 滑块

```
标签  MIN ──────●────────── MAX  当前值
              [===拖拽柄===]
```
- 轨道: 高度 4px, MEDIUM 色
- 已选区: 高度 4px, BLACK 色
- 拖拽柄: 24×24px 圆形, BLACK 填充
- 触摸区: 高度 48px (扩大触摸范围)

### 列表项

```
┌──────────────────────────────┐
│  标签文字              值  ▶  │  56px 高
├──────────────────────────────┤  1px MEDIUM 分隔线
```

### 页面过渡

- 所有页面切换使用**全屏刷新** (MODE_GC16) 以确保显示质量
- 翻页使用**局部刷新** (MODE_DU 或 MODE_GL16) 以提高速度
- 每隔 N 页 (默认5) 强制一次全刷消除残影
